import{aD as ee,aB as m,s as x,bG as te,ay as p,cn as D,aA as G,N as ae,M as se,T as n,r as f,az as le,bV as re,aC as ne,G as oe,ae as g,co as ie,cp as ce,cq as de,cr as me,cs as ue,j as e,F as I,d as o,aZ as pe,a9 as H,ct as fe,u as T,a as _,aq as j,au as W,av as h,ak as C,aN as he,a5 as P,bH as ge,a7 as xe,aL as q,bp as ye,a8 as be,aI as ve,aJ as Ne,an as Ie,al as Ce}from"./index-1vAFrwud.js";import{F as we}from"./FusePageCarded-8SFpzLO8.js";const Se=ee(m.jsx("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreHoriz"),je=["slots","slotProps"],ke=x(te)(({theme:a})=>p({display:"flex",marginLeft:`calc(${a.spacing(1)} * 0.5)`,marginRight:`calc(${a.spacing(1)} * 0.5)`},a.palette.mode==="light"?{backgroundColor:a.palette.grey[100],color:a.palette.grey[700]}:{backgroundColor:a.palette.grey[700],color:a.palette.grey[100]},{borderRadius:2,"&:hover, &:focus":p({},a.palette.mode==="light"?{backgroundColor:a.palette.grey[200]}:{backgroundColor:a.palette.grey[600]}),"&:active":p({boxShadow:a.shadows[0]},a.palette.mode==="light"?{backgroundColor:D(a.palette.grey[200],.12)}:{backgroundColor:D(a.palette.grey[600],.12)})})),Me=x(Se)({width:24,height:16});function Be(a){const{slots:t={},slotProps:r={}}=a,l=G(a,je),s=a;return m.jsx("li",{children:m.jsx(ke,p({focusRipple:!0},l,{ownerState:s,children:m.jsx(Me,p({as:t.CollapsedIcon,ownerState:s},r.collapsedIcon))}))})}function Fe(a){return se("MuiBreadcrumbs",a)}const _e=ae("MuiBreadcrumbs",["root","ol","li","separator"]),Pe=_e,Te=["children","className","component","slots","slotProps","expandText","itemsAfterCollapse","itemsBeforeCollapse","maxItems","separator"],ze=a=>{const{classes:t}=a;return oe({root:["root"],li:["li"],ol:["ol"],separator:["separator"]},Fe,t)},Re=x(n,{name:"MuiBreadcrumbs",slot:"Root",overridesResolver:(a,t)=>[{[`& .${Pe.li}`]:t.li},t.root]})({}),Ae=x("ol",{name:"MuiBreadcrumbs",slot:"Ol",overridesResolver:(a,t)=>t.ol})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}),$e=x("li",{name:"MuiBreadcrumbs",slot:"Separator",overridesResolver:(a,t)=>t.separator})({display:"flex",userSelect:"none",marginLeft:8,marginRight:8});function Ee(a,t,r,l){return a.reduce((s,c,i)=>(i<a.length-1?s=s.concat(c,m.jsx($e,{"aria-hidden":!0,className:t,ownerState:l,children:r},`separator-${i}`)):s.push(c),s),[])}const Le=f.forwardRef(function(t,r){const l=le({props:t,name:"MuiBreadcrumbs"}),{children:s,className:c,component:i="nav",slots:u={},slotProps:w={},expandText:y="Show path",itemsAfterCollapse:b=1,itemsBeforeCollapse:v=1,maxItems:M=8,separator:A="/"}=l,X=G(l,Te),[$,Z]=f.useState(!1),N=p({},l,{component:i,expanded:$,expandText:y,itemsAfterCollapse:b,itemsBeforeCollapse:v,maxItems:M,separator:A}),S=ze(N),K=re({elementType:u.CollapsedIcon,externalSlotProps:w.collapsedIcon,ownerState:N}),E=f.useRef(null),Y=d=>{const F=()=>{Z(!0);const L=E.current.querySelector("a[href],button,[tabindex]");L&&L.focus()};return v+b>=d.length?d:[...d.slice(0,v),m.jsx(Be,{"aria-label":y,slots:{CollapsedIcon:u.CollapsedIcon},slotProps:{collapsedIcon:K},onClick:F},"ellipsis"),...d.slice(d.length-b,d.length)]},B=f.Children.toArray(s).filter(d=>f.isValidElement(d)).map((d,F)=>m.jsx("li",{className:S.li,children:d},`child-${F}`));return m.jsx(Re,p({ref:r,component:i,color:"text.secondary",className:ne(S.root,c),ownerState:N},X,{children:m.jsx(Ae,{className:S.ol,ref:E,ownerState:N,children:Ee($||M&&B.length<=M?B:Y(B),S.separator,A,N)})}))}),De=Le,qe=x(g)(({...a})=>({backgroundColor:{PDF:ie[600],DOC:ce[600],XLS:de[600],TXT:me[600],JPG:ue[600]}[a.color]}));function z(a){const{type:t}=a;return t==="folder"?e(I,{size:56,color:"disabled",children:"heroicons-outline:folder"}):o("div",{className:"relative",children:[e(I,{size:56,color:"disabled",children:"heroicons-outline:document"}),e(qe,{color:t,className:"absolute left-0 bottom-0 px-6 rounded text-12 font-semibold leading-20 text-white",children:t})]})}const U={selectedItemId:null},k=pe({name:"fileManagerApp",initialState:U,reducers:{setSelectedItemId:(a,t)=>{a.selectedItemId=t.payload},resetSelectedItemId:a=>{a.selectedItemId=U.selectedItemId}},selectors:{selectSelectedItemId:a=>a.selectedItemId}});H.inject(k);const Ue=k.injectInto(H),{setSelectedItemId:J,resetSelectedItemId:O}=k.actions,{selectSelectedItemId:Q}=Ue.selectors;k.reducer;function Oe(a){const{items:t}=a,r=fe(),{pathname:l}=r,s=T(),c=_(Q),i=j.find(t,{id:c});return f.useEffect(()=>{s(O())},[l]),i?o(C.div,{initial:{y:50,opacity:.8},animate:{y:0,opacity:1,transition:{delay:.3}},className:"file-details p-24 sm:p-32",children:[e("div",{className:"flex items-center justify-end w-full",children:e(W,{size:"large",onClick:()=>s(O()),children:e(I,{children:"heroicons-outline:x"})})}),e(g,{className:" w-full rounded-8 border preview h-128 sm:h-256 file-icon flex items-center justify-center my-32",sx:{backgroundColor:u=>u.palette.mode==="light"?h(u.palette.background.default,.4):h(u.palette.background.default,.02)},children:e(C.div,{initial:{scale:0},animate:{scale:1,transition:{delay:.3}},children:e(z,{type:i.type})})}),e(n,{className:"text-18 font-medium",children:i.name}),e("div",{className:"text-16 font-medium mt-32",children:"Information"}),o("div",{className:"flex flex-col mt-16 border-t border-b divide-y font-medium",children:[o("div",{className:"flex items-center justify-between py-12",children:[e(n,{color:"text.secondary",children:"Created By"}),e(n,{children:i.createdBy})]}),o("div",{className:"flex items-center justify-between py-12",children:[e(n,{color:"text.secondary",children:"Created At"}),e(n,{children:i.createdAt})]}),o("div",{className:"flex items-center justify-between py-12",children:[e(n,{color:"text.secondary",children:"Modified At"}),e(n,{children:i.modifiedAt})]}),o("div",{className:"flex items-center justify-between py-12",children:[e(n,{color:"text.secondary",children:"Size"}),e(n,{children:i.size})]}),i.contents&&o("div",{className:"flex items-center justify-between py-12",children:[e(n,{color:"text.secondary",children:"Contents"}),e(n,{children:i.contents})]})]}),i.description&&o(he,{children:[e("div",{className:"text-16 font-medium mt-32 pb-16 border-b",children:"Description"}),e(n,{className:"py-12",children:i.description})]}),o("div",{className:"grid grid-cols-2 gap-16 w-full mt-32",children:[e(P,{className:"flex-auto",color:"secondary",variant:"contained",children:"Download"}),e(P,{className:"flex-auto",children:"Delete"})]})]}):null}var R={},Ge=xe;Object.defineProperty(R,"__esModule",{value:!0});var V=R.default=void 0,He=Ge(ge()),We=m;V=R.default=(0,He.default)((0,We.jsx)("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext");function Je(a){const{path:t,folders:r,files:l}=a;return o("div",{className:"p-24 sm:p-32 w-full flex  space-y-8 sm:space-y-0 items-center justify-between",children:[o("div",{className:"flex flex-col space-y-8 sm:space-y-0",children:[o(C.span,{className:"flex items-end",initial:{x:-20},animate:{x:0,transition:{delay:.2}},children:[e(n,{component:q,to:"/apps/file-manager",className:"text-20 md:text-32 font-extrabold tracking-tight leading-none",role:"button",children:"File Manager"}),t&&(t==null?void 0:t.length)>0&&o(De,{"aria-label":"breadcrumb",className:"mx-12",separator:e(V,{fontSize:"small"}),children:[e("div",{}),t.map((s,c)=>c+1===t.length?e(n,{children:s.name},c):e(q,{color:"text.primary",to:`/apps/file-manager/${s.id}`,children:s.name},c))]})]}),e(C.span,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1,transition:{delay:.2}},children:e(n,{className:"text-14 font-medium mx-2",color:"text.secondary",children:`${r.length} folders, ${l.length} files`})})]}),e("div",{className:"flex items-center -mx-8",children:o(P,{className:"mx-8 whitespace-nowrap",variant:"contained",color:"secondary",children:[e(I,{size:20,children:"heroicons-outline:plus"}),e("span",{className:"hidden sm:flex mx-8",children:"Upload file"})]})})]})}function Qe(a){const{item:t}=a,r=T();return t?o(g,{sx:{backgroundColor:"background.paper"},className:"relative w-full sm:w-160 h-160 m-8 p-16 shadow rounded-16",children:[e(W,{className:"absolute z-20 top-0 right-0 m-6 w-32 h-32 min-h-32",onClick:()=>r(J(t.id)),children:e(I,{size:20,children:"heroicons-solid:information-circle"})}),o(ye,{className:"flex flex-col h-full w-full",to:`/apps/file-manager/${t.id}`,role:"button",children:[e("div",{className:"flex flex-auto w-full items-center justify-center",children:e(z,{type:t.type})}),o("div",{className:"flex shrink flex-col justify-center text-center",children:[e(n,{className:"truncate text-12 font-medium",children:t.name}),t.contents&&e(n,{className:"truncate text-12 font-medium",color:"text.secondary",children:t.contents})]})]})]}):null}function Ve(a){const{item:t}=a,r=T();return t?o(g,{sx:{backgroundColor:"background.paper"},className:"flex flex-col relative w-full sm:w-160 h-160 m-8 p-16 shadow rounded-16 cursor-pointer",onClick:()=>r(J(t.id)),children:[e("div",{className:"flex flex-auto w-full items-center justify-center",children:e(z,{type:t.type})}),o("div",{className:"flex shrink flex-col justify-center text-center",children:[e(n,{className:"truncate text-12 font-medium",children:t.name}),t.contents&&e(n,{className:"truncate text-12 font-medium",color:"text.secondary",children:t.contents})]})]}):null}function Xe(a){const{files:t,folders:r}=a;return t.length===0&&r.length===0?e(C.div,{initial:{opacity:0},animate:{opacity:1,transition:{delay:.1}},className:"flex flex-1 items-center justify-center h-full",children:e(n,{color:"text.secondary",variant:"h5",children:"There are no items!"})}):o("div",{className:"p-32",children:[(r==null?void 0:r.length)>0&&o(g,{className:"p-16 w-full rounded-16 mb-24 border",sx:{backgroundColor:l=>l.palette.mode==="light"?h(l.palette.background.default,.4):h(l.palette.background.default,.02)},children:[e(n,{className:"font-medium",children:"Folders"}),e("div",{className:"flex flex-wrap -m-8 mt-8",children:r.map(l=>e(Qe,{item:l},l.id))})]}),t.length>0&&o(g,{className:"p-16 w-full rounded-16 mb-24 border",sx:{backgroundColor:l=>l.palette.mode==="light"?h(l.palette.background.default,.4):h(l.palette.background.default,.02)},children:[e(n,{className:"font-medium",children:"Files"}),e("div",{className:"flex flex-wrap -m-8 mt-8",children:t.map(l=>e(Ve,{item:l},l.id))})]})]})}const Ze=["file_manager_folder"],Ke=be.enhanceEndpoints({addTagTypes:Ze}).injectEndpoints({endpoints:a=>({getFileManagerFolder:a.query({query:t=>({url:t}),providesTags:["file_manager_folder"]}),updateFileManagerFolder:a.mutation({query:t=>({url:`/mock-api/file-manager/${t.folderId}`,method:"PUT",body:t.fileManagerItem}),invalidatesTags:["file_manager_folder"]}),deleteFileManagerFolder:a.mutation({query:t=>({url:`/mock-api/file-manager/${t}`,method:"DELETE"}),invalidatesTags:["file_manager_folder"]})}),overrideExisting:!1}),{useGetFileManagerFolderQuery:Ye,useUpdateFileManagerFolderMutation:at,useDeleteFileManagerFolderMutation:st}=Ke;function lt(){const a=ve(v=>v.breakpoints.down("lg")),t=Ne(),{folderId:r}=t;console.log(r);let l="";_(Ie),l="/";const{data:s,isLoading:c}=Ye(l?`${l}files/logs`:`/mock-api/file-manager/${r}`);console.log(s);const i=_(Q),u=j.find(s==null?void 0:s.items,{id:i}),w=j.filter(s==null?void 0:s.items,{type:"folder"}),y=j.reject(s==null?void 0:s.items,{type:"folder"}),b=s==null?void 0:s.path;return c?e(Ce,{}):e(we,{header:e(Je,{path:b,folders:w,files:y}),content:e(Xe,{folders:w,files:y}),rightSidebarOpen:!!u,rightSidebarContent:e("div",{className:"w-full",children:e(Oe,{items:s==null?void 0:s.items})}),rightSidebarWidth:400,scroll:a?"normal":"content"})}export{lt as default};
