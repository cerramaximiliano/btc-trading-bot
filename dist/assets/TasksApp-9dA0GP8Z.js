import{j as e,ax as L,a as k,an as w,cU as N,aq as S,d as a,T as u,ak as x,a5 as g,bp as m,F as l,cV as R,g as I,aC as P,i as A,au as M,h as T,f as y,D,aN as p,cW as C,al as j,e as z,s as F,n as E,aJ as H,r as b,aI as O}from"./index-3IH-gIhK.js";import{P as v,D as U,C as $}from"./react-beautiful-dnd.esm-D1bZtROj.js";function B(){return e("div",{className:"flex flex-col flex-auto",children:e(L,{})})}function Q(){let t="";const{url:n,apiKey:s}=k(w);t="/";const{data:r}=N(t||"/mock-api/",s),o=S.filter(r,c=>c.type==="task"&&!c.completed).length;return a("div",{className:"flex flex-col sm:flex-row space-y-16 sm:space-y-0 p-24 sm:p-32 w-full border-b-1 justify-between",children:[a("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-12",children:[e(x.span,{initial:{x:-20},animate:{x:0,transition:{delay:.2}},children:e(u,{className:"text-24 md:text-32 font-extrabold tracking-tight leading-none",children:"Tasks"})}),e(x.span,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1,transition:{delay:.2}},children:e(u,{className:"text-14 font-medium ml-2",color:"text.secondary",children:`${o} remaining tasks`})})]}),a("div",{className:"flex items-center -mx-8",children:[a(g,{className:"mx-8 whitespace-nowrap",component:m,to:"new/section",children:[e(l,{size:20,children:"heroicons-outline:plus"}),e("span",{className:"mx-8",children:"Add Section"})]}),a(g,{className:"mx-8 whitespace-nowrap",variant:"contained",color:"secondary",component:m,to:"new/task",children:[e(l,{size:20,children:"heroicons-outline:plus"}),e("span",{className:"mx-8",children:"Add Task"})]})]})]})}function W(t){const n=new Date,s=new Date(t)-n;return Math.max(0,Math.floor(s/(1e3*60)))}function q(t){const n=W(t);return n>0?`Next run in ${n} minutes`:n===0?"Running now":"Unknown"}function G(t){const{data:n,index:s}=t,[r]=R();return e(v,{draggableId:n.id,index:s,children:(o,c)=>a(p,{children:[a(I,{className:P(c.isDragging?"shadow-lg":"shadow","px-40 py-12 group"),sx:{bgcolor:"background.paper"},button:!0,component:m,to:`/apps/tasks/${n.id}`,ref:o.innerRef,...o.draggableProps,children:[e("div",{className:"md:hidden absolute flex items-center justify-center inset-y-0 left-0 w-32 cursor-move md:group-hover:flex",...o.dragHandleProps,children:e(l,{sx:{color:"text.disabled"},size:20,children:"heroicons-solid:menu"})}),e(A,{className:"min-w-40 -ml-10 mr-8",children:e(M,{sx:{color:n.completed?"secondary.main":"text.disabled"},onClick:i=>{i.preventDefault(),i.stopPropagation(),r({...n,completed:!n.completed})},children:e(l,{children:"heroicons-outline:check-circle"})})}),e(T,{classes:{root:"m-0",primary:"truncate"},primary:n.title}),a("div",{className:"flex items-center",children:[a("div",{children:[n.priority===0&&e(l,{className:"text-green icon-size-16 mx-12",children:"heroicons-outline:arrow-narrow-down"}),n.priority===2&&e(l,{className:"text-red icon-size-16 mx-12",children:"heroicons-outline:arrow-narrow-up"})]}),a(u,{className:"text-12 whitespace-nowrap",color:"text.secondary",children:[n.dueDate&&e("span",{children:y(new Date(n.dueDate),"LLL dd")}),n.nextRunAt&&a("span",{className:"",children:[n.dueDate?" ":"","Next Run At ",y(new Date(n.nextRunAt),"LLL dd HH:mm"),n.nextRunAt&&a("span",{className:"hidden md:block md:text-red",children:["Â ",q(n.nextRunAt)]})]})]})]})]}),e(D,{})]})})}function J(t){const{data:n,index:s}=t;return e(v,{draggableId:n.id,index:s,children:r=>a(p,{children:[a(I,{className:"px-40 py-12 group",sx:{bgcolor:"background.default"},button:!0,component:m,to:`/apps/tasks/${n.id}`,ref:r.innerRef,...r.draggableProps,children:[e("div",{className:"md:hidden absolute flex items-center justify-center inset-y-0 left-0 w-32 cursor-move md:group-hover:flex",...r.dragHandleProps,children:e(l,{sx:{color:"text.disabled"},size:20,children:"heroicons-solid:menu"})}),e(T,{classes:{root:"m-0",primary:"font-semibold text-16 truncate"},primary:n.title})]}),e(D,{})]})})}function K(){let t="";k(w),t="/";const{data:n,isLoading:s}=N(t||"/mock-api/"),[r]=C();if(s)return e(j,{});if(!n||n.length===0)return e("div",{className:"flex flex-1 items-center justify-center h-full",children:e(u,{color:"text.secondary",variant:"h5",children:"There are no tasks!"})});function o(c){const{source:i,destination:d}=c;if(!d)return;const{index:h}=d,{index:f}=i;h!==f&&r({startIndex:f,endIndex:h})}return e(z,{className:"w-full m-0 p-0",children:e(U,{onDragEnd:o,children:e($,{droppableId:"list",type:"list",direction:"vertical",children:c=>a(p,{children:[e("div",{ref:c.innerRef,children:n.map((i,d)=>i.type==="task"?e(G,{data:i,index:d},i.id):i.type==="section"?e(J,{index:d,data:i},i.id):null)}),c.placeholder]})})})})}const V=F(E)(({theme:t})=>({"& .FusePageSimple-header":{backgroundColor:t.palette.background.paper}}));function Y(){const t=H(),[n,s]=b.useState(!1),r=O(o=>o.breakpoints.down("lg"));return b.useEffect(()=>{s(!!t.id)},[t]),e(V,{header:e(Q,{}),content:e(K,{}),rightSidebarContent:e(B,{}),rightSidebarOpen:n,rightSidebarOnClose:()=>s(!1),rightSidebarWidth:640,scroll:r?"normal":"content"})}export{Y as default};
